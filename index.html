<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Un Mensaje Para Vos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Cormorant+Garamond:ital,wght@0,700;1,400;1,700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000;
            overflow-y: auto; /* Permitir scroll vertical */
        }
        /* --- Scrollbar Personalizado --- */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f2027;
        }
        ::-webkit-scrollbar-thumb {
            background: #00ffff;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #00cccc;
        }
        .font-special-message {
            font-family: 'Cormorant Garamond', serif;
        }
        #background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(-45deg, #0f2027, #203a43, #2c5364, #e73c7e);
            background-size: 400% 400%;
            animation: gradient 20s ease infinite;
        }
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .heart {
            width: 180px;
            height: 180px;
            transition: transform 0.2s ease-in-out;
            filter: drop-shadow(0 0 15px rgba(255, 20, 20, 0.8)) 
                    drop-shadow(0 0 45px rgba(255, 20, 20, 0.6));
        }
        .heart.beating {
            animation: beat 1.2s infinite cubic-bezier(0.215, 0.61, 0.355, 1);
        }
        @keyframes beat {
            0% { transform: scale(1); }
            15% { transform: scale(1.15); }
            30% { transform: scale(1); }
            45% { transform: scale(1.1); }
            60% { transform: scale(1); }
            100% { transform: scale(1); }
        }
        .progress-ring__circle {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.7));
        }
        .fade-in {
            animation: fadeInAnimation 2.5s 1s ease-in forwards;
            opacity: 0;
        }
        @keyframes fadeInAnimation {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-out {
            animation: fadeOutAnimation 1.5s ease-out forwards;
        }
        @keyframes fadeOutAnimation {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.8); visibility: hidden; }
        }
        #animation-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            height: 250px;
            margin: 0 auto;
            opacity: 0;
            animation: fadeInCanvas 2s 0.5s ease-in forwards;
        }
        #constellation-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        @keyframes fadeInCanvas {
            to { opacity: 1; }
        }
        #distance {
            position: absolute;
            top: 40%; /* Movido un poco más arriba */
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            /* Misma fuente que 'Ni' y 'Bi' */
            font-family: 'Inter', sans-serif;
            font-weight: 700; /* bold */
            font-size: 1.75rem; /* 28px */
            /* Mismo efecto de brillo que las estrellas */
            text-shadow: 0 0 15px rgba(0, 255, 255, 0.9), 0 0 25px rgba(0, 255, 255, 0.5);
            z-index: 10;
            color: #cfffff; /* Un cian más suave para integrarse mejor */
        }
    </style>
</head>
<body class="text-white flex items-center justify-center min-h-screen">
    <div id="background"></div>

    <!-- Pantalla Inicial -->
    <div id="start-screen" class="text-center p-8 flex flex-col items-center justify-center min-h-screen">
        <h1 class="text-2xl md:text-4xl mb-4 font-bold">Para mi amorcito</h1>
        <p class="text-lg md:text-xl mb-12">Mantén presionado este corazón por 7 segundos...</p>
        <div id="heart-container" class="relative inline-flex items-center justify-center cursor-pointer select-none">
            <svg class="w-56 h-56 absolute">
                <circle class="text-transparent" stroke-width="8" stroke="rgba(255, 255, 255, 0.1)" fill="transparent" r="100" cx="112" cy="112"/>
                <circle id="progress-circle" class="progress-ring__circle text-white" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="100" cx="112" cy="112"/>
            </svg>
            <div id="heart-button" class="heart text-red-500">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                </svg>
            </div>
        </div>
    </div>

    <!-- Pantalla de Mensaje -->
    <div id="message-screen" class="hidden text-center p-4 max-w-3xl w-full mx-auto">
        <div id="animation-container">
            <canvas id="constellation-canvas"></canvas>
            <h2 id="distance" class="text-cyan-300"></h2>
        </div>
        <div class="bg-black bg-opacity-20 backdrop-blur-sm rounded-2xl p-6 shadow-2xl mt-4 fade-in">
            <p class="font-special-message text-4xl md:text-5xl leading-relaxed">
                "Sé que la distancia es enorme, y que tal vez tu corazón encuentre un nuevo hogar en Corea... pero sin importar cada uno de esos kilómetros, quiero que sepas que te extraño más de lo que las palabras pueden decir. Y aunque quieras estar con un coreano, este corazón sigue y seguirá latiendo por vos."
            </p>
        </div>
    </div>

    <script>
        // --- CONFIGURACIÓN INICIAL ---
        const heartContainer = document.getElementById('heart-container');
        const heartButton = document.getElementById('heart-button');
        const startScreen = document.getElementById('start-screen');
        const messageScreen = document.getElementById('message-screen');
        const distanceDisplay = document.getElementById('distance');
        
        const progressCircle = document.getElementById('progress-circle');
        const radius = progressCircle.r.baseVal.value;
        const circumference = radius * 2 * Math.PI;
        progressCircle.style.strokeDasharray = `${circumference} ${circumference}`;
        progressCircle.style.strokeDashoffset = circumference;

        let holdDuration = 0;
        const requiredHoldTime = 7000; // 7 segundos
        let interval;

        // --- DISTANCIA ---
        const distance = 19321;
        const formattedDistance = new Intl.NumberFormat('es-AR').format(distance);
        distanceDisplay.textContent = `${formattedDistance} km`; // Texto actualizado

        // --- LÓGICA DE INTERACCIÓN ---
        function setProgress(percent) {
            const offset = circumference - (percent / 100) * circumference;
            progressCircle.style.strokeDashoffset = offset;
        }

        function startPress() {
            holdDuration = 0;
            setProgress(0);
            heartButton.classList.add('beating');
            
            const startTime = Date.now();
            interval = setInterval(() => {
                holdDuration = Date.now() - startTime;
                const progress = Math.min((holdDuration / requiredHoldTime) * 100, 100);
                setProgress(progress);

                if (holdDuration >= requiredHoldTime) {
                    showFinalMessage();
                    clearInterval(interval);
                }
            }, 50);
        }

        function cancelPress() {
            clearInterval(interval);
            heartButton.classList.remove('beating');
            setProgress(0);
        }

        function showFinalMessage() {
            startScreen.classList.add('fade-out');
            startScreen.addEventListener('animationend', () => {
                startScreen.style.display = 'none'; // Ocultar completamente
                messageScreen.classList.remove('hidden');
                initConstellationAnimation();
            }, { once: true });
        }

        // Event Listeners
        heartContainer.addEventListener('mousedown', startPress);
        heartContainer.addEventListener('mouseup', cancelPress);
        heartContainer.addEventListener('mouseleave', cancelPress);
        heartContainer.addEventListener('touchstart', (e) => { e.preventDefault(); startPress(); });
        heartContainer.addEventListener('touchend', cancelPress);
        heartContainer.addEventListener('touchcancel', cancelPress);

        // --- LÓGICA DE LA ANIMACIÓN DE CONSTELACIÓN ---
        function initConstellationAnimation() {
            const container = document.getElementById('animation-container');
            const canvas = document.getElementById('constellation-canvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;

            // Estrellas de fondo
            const stars = [];
            for (let i = 0; i < 100; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    radius: Math.random() * 1.5,
                    alpha: Math.random() * 0.5 + 0.2,
                    twinkleSpeed: Math.random() * 0.015
                });
            }

            // Nuestras estrellas y la línea
            const p1 = { x: canvas.width * 0.15, y: canvas.height * 0.5 };
            const p2 = { x: canvas.width * 0.85, y: canvas.height * 0.5 };
            
            // Partículas de energía
            const particles = [];
            for (let i = 0; i < 20; i++) {
                particles.push({ progress: Math.random() });
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                stars.forEach(star => {
                    star.alpha += star.twinkleSpeed;
                    if (star.alpha > 0.7 || star.alpha < 0.2) star.twinkleSpeed = -star.twinkleSpeed;
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(255, 255, 255, ${star.alpha})`;
                    ctx.fill();
                });

                const gradient = ctx.createLinearGradient(p1.x, p1.y, p2.x, p2.y);
                gradient.addColorStop(0, "rgba(0, 255, 255, 0.1)");
                gradient.addColorStop(0.5, "rgba(0, 255, 255, 0.5)");
                gradient.addColorStop(1, "rgba(0, 255, 255, 0.1)");
                ctx.beginPath();
                ctx.moveTo(p1.x, p1.y);
                ctx.lineTo(p2.x, p2.y);
                ctx.strokeStyle = gradient;
                ctx.lineWidth = 2;
                ctx.stroke();

                particles.forEach(p => {
                    p.progress += 0.005;
                    if (p.progress > 1) p.progress = 0;
                    const x = p1.x + (p2.x - p1.x) * p.progress;
                    const y = p1.y + (p2.y - p1.y) * p.progress;
                    ctx.beginPath();
                    ctx.arc(x, y, 3, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(173, 216, 230, 1)';
                    ctx.shadowColor = 'rgba(173, 216, 230, 1)';
                    ctx.shadowBlur = 15;
                    ctx.fill();
                    ctx.shadowBlur = 0;
                });

                const drawGlowingCircle = (x, y) => {
                    ctx.beginPath();
                    ctx.arc(x, y, 8, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(0, 255, 255, 1)';
                    ctx.shadowColor = 'rgba(0, 255, 255, 1)';
                    ctx.shadowBlur = 25;
                    ctx.fill();
                    ctx.shadowBlur = 0;
                };
                drawGlowingCircle(p1.x, p1.y);
                drawGlowingCircle(p2.x, p2.y);

                ctx.font = 'bold 18px Inter';
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.textAlign = 'center';
                ctx.fillText('Ni', p1.x, p1.y + 30);
                ctx.fillText('Bi', p2.x, p2.y + 30);
                
                requestAnimationFrame(draw);
            }

            draw();

            window.addEventListener('resize', () => {
                canvas.width = container.clientWidth;
                canvas.height = container.clientHeight;
                p1.x = canvas.width * 0.15;
                p1.y = canvas.height * 0.5;
                p2.x = canvas.width * 0.85;
                p2.y = canvas.height * 0.5;
            });
        }
    </script>
</body>
</html>
